<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/style.css">
    <title>guiler.me - Magnet Opener</title>
</head>
<body>

    <div class="container">
        <a style="text-decoration: none" id='magnetLink'><h1 id="linkText">:)</h1></a>
        <input id="magnetInput" onclick="this.select()" data-tippy-content="Copied!"></input>
    </div>

    <script src="js/popper.js"></script>
    <script src="js/tippy.js"></script>
    <script src="js/clipboard.min.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const magnetBtn = document.getElementById('magnetLink');
        const uri = urlParams.get('uri');
        if (!uri || !uri.startsWith('magnet:')) 
            document.getElementById('magnetInput').innerHTML = ":(";
        else{
            magnetBtn.href = uri;
            magnetBtn.click();
            document.getElementById('magnetInput').value = decodeURIComponent(uri);
            document.getElementById('magnetInput').setAttribute('data-clipboard-text', decodeURIComponent(uri));
        }
        var clipboard = new ClipboardJS('#magnetInput');
        tippy('#magnetInput', {trigger: 'click'})
    </script>
</body>
</html>